{% extends 'base.html' %}
{% load static %}

<!-- add custom css -->

{% block head %}
<link rel="stylesheet" href="{% static 'css/properties/property-detail.css' %}">
{% endblock head %}


{% block content %}
<section class="property-container">
    <div class="property-img">
        <img src="{% static 'images/sk8r-boi-property.svg' %}" alt="A skater boy property" />
    </div>
    <div class="property-details">
        <h1>{{ property.location }}</h1>
        {% if property.year > 0 %}
        <h2>A {{ property.year }} year old {{ property.model }}</h2>
        {% else %}
        <h2>A {{ property.model }} brand new.</h2>
        {% endif %}
        <p>{{ property.description }}</p>

        <div class="property-actions">
            <a href="{% url 'property-update' property.id %}" class="btn warn">Edit</a>
            <a href="{% url 'property-delete' property.id %}" class="btn danger">Delete</a>
        </div>
    </div>
</section>

<!-- Existing property-container above -->
<div class="appointment-container">
    <section class="appointments">

        <div class="subsection-title">
            <h2>Feedings</h2>
            <img src="{% static 'images/property-cone.svg' %}" alt="An ice cream cone property" />
            <img src="{% static 'images/property-onigiri.svg' %}" alt="A property as onigiri" />
            <img src="{% static 'images/kitty-kabob.svg' %}" alt="A kabob of kittens" />
        </div>

        <h3>Add a appointment</h3>
        <form action="{% url 'add-appointment' property.id %}" method="post" class="subsection-content">
            {% csrf_token %}
            {{ appointment_form.as_p }}
            <button type="submit" class="btn submit">Add Appointment</button>
        </form>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Appointment</th>
                </tr>
            </thead>
            <tbody>

                <!-- the model that doesn't have the FK (foreign key)
         can always access the many side by using 
         related model_set example property.feeding_set.all() -->

                {% for appointment in property.appointment_set.all %}
                <tr>
                    <td>{{appointment.date}}</td>
                    <td>{{appointment.get_appointment_display}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</div>




{% endblock content %}
